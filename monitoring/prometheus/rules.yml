groups:
- name: default
  rules:
  - alert: AccountBalanceLow
    expr: |
      balance_account < 0.5
    for: 5m
    labels:
      severity: high
    annotations:
      summary: '{{ $labels.label }} account balance is too low ({{ $value }} ETH)'
      description: |-
        Account {{ $labels.label }} ({{ $labels.address }}) has a balance of {{ $value }} ETH, which is below 1 ETH threshold.
        Please top up this account.
  - alert: NEGATING TEST ALERT AccountBalanceLow
    expr: |
      balance_account > 0.5
    for: 5m
    labels:
      severity: high
    annotations:
      summary: '{{ $labels.label }} test alert for local testing: account balance is too low ({{ $value }} ETH)'
      description: |-
        THIS IS JUST A TEST ALERT FOR LOCAL TESTING
        Account {{ $labels.label }} ({{ $labels.address }}) has a balance of {{ $value }} ETH, which is below 1 ETH threshold.
        Please top up this account.
  - alert: BlockNotIncrementing
    expr: |
      changes(current_block[5m]) == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "Block number not incrementing"
      description: |-
        Block number has been stuck at {{ $value }} for over 5 minutes.
        Last change was at {{ $labels.last_change }}.
  - alert: NEGATING TEST ALERT BlockNotIncrementing
    expr: |
      rate(current_block[5m]) > 0
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "NEGATING TEST ALERT for Block number not incrementing"
      description: |-
        THIS IS JUST A TEST ALERT FOR LOCAL TESTING
        Block number has been stuck at {{ $value }} for over 5 minutes.
        Last change was at {{ $labels.last_change }}.
  - alert: HealthCheckFailing
    expr: |
      up{job="health_monitor"} == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "Health check endpoint is down"
      description: "Health check endpoint at {{ $labels.instance }} is not responding with HTTP 200"